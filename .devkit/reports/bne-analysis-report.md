# BNE (Biblioteca Nacional de España) Library Analysis Report

**Date:** 2025-07-05
**Analyzer:** Claude Code BNE Analysis Agent

## Executive Summary

- **Library:** Biblioteca Nacional de España (BNE)
- **Base URL:** https://bdh-rd.bne.es/
- **Viewer Type:** custom
- **Implementation Complexity:** High
- **Estimated Effort:** 4-6 hours

## URL Analysis Results


### Manuscript ID: 0000007619
- **URL:** https://bdh-rd.bne.es/viewer.vm?id=0000007619&page=1
- **Viewer Detection:** custom
- **Manifest URLs Found:** 2
- **Image Patterns Found:** 0
- **JavaScript Includes:** 2


### Manuscript ID: 0000060229
- **URL:** https://bdh-rd.bne.es/viewer.vm?id=0000060229&page=1
- **Viewer Detection:** custom
- **Manifest URLs Found:** 2
- **Image Patterns Found:** 0
- **JavaScript Includes:** 2


### Manuscript ID: 0000015300
- **URL:** https://bdh-rd.bne.es/viewer.vm?id=0000015300&page=1
- **Viewer Detection:** custom
- **Manifest URLs Found:** 2
- **Image Patterns Found:** 0
- **JavaScript Includes:** 2


### Manuscript ID: 0000040654
- **URL:** https://bdh-rd.bne.es/viewer.vm?id=0000040654&page=1
- **Viewer Detection:** custom
- **Manifest URLs Found:** 2
- **Image Patterns Found:** 0
- **JavaScript Includes:** 2


### Manuscript ID: 0000115597
- **URL:** https://bdh-rd.bne.es/viewer.vm?id=0000115597&page=1
- **Viewer Detection:** custom
- **Manifest URLs Found:** 2
- **Image Patterns Found:** 0
- **JavaScript Includes:** 2


### Manuscript ID: 0000005030
- **URL:** https://bdh-rd.bne.es/viewer.vm?id=0000005030&page=1
- **Viewer Detection:** custom
- **Manifest URLs Found:** 2
- **Image Patterns Found:** 0
- **JavaScript Includes:** 2


## Maximum Resolution Testing


### Manuscript 0000007619

- **Resolution:** full/full
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000007619&page=1&size=full/full


- **Resolution:** full/max
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000007619&page=1&size=full/max


- **Resolution:** full/2000
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000007619&page=1&size=full/2000


- **Resolution:** full/4000
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000007619&page=1&size=full/4000


- **Resolution:** full/1200
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000007619&page=1&size=full/1200


- **Resolution:** full/800
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000007619&page=1&size=full/800



### Manuscript 0000060229

- **Resolution:** full/full
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000060229&page=1&size=full/full


- **Resolution:** full/max
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000060229&page=1&size=full/max


- **Resolution:** full/2000
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000060229&page=1&size=full/2000


- **Resolution:** full/4000
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000060229&page=1&size=full/4000


- **Resolution:** full/1200
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000060229&page=1&size=full/1200


- **Resolution:** full/800
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000060229&page=1&size=full/800



### Manuscript 0000015300

- **Resolution:** full/full
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000015300&page=1&size=full/full


- **Resolution:** full/max
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000015300&page=1&size=full/max


- **Resolution:** full/2000
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000015300&page=1&size=full/2000


- **Resolution:** full/4000
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000015300&page=1&size=full/4000


- **Resolution:** full/1200
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000015300&page=1&size=full/1200


- **Resolution:** full/800
- **Success:** No
- **Size:** 1375 bytes
- **Content Type:** text/html;charset=ISO-8859-1
- **URL:** https://bdh-rd.bne.es/ImageProxy?id=0000015300&page=1&size=full/800



## Implementation Recommendations

- URL Pattern: https://bdh-rd.bne.es/viewer.vm?id=MANUSCRIPT_ID&page=PAGE_NUMBER
- Manuscript ID extraction: Extract from id parameter in URL
- Page discovery: Need to determine total pages through API or page navigation
- Image access: Test different image proxy endpoints for optimal resolution
- Authentication: Test if authentication is required for image access

## Key Challenges

- Determine image endpoint patterns
- Implement page count discovery
- Test maximum resolution options
- Handle authentication if required

## Technical Details

### Detected Viewer Technologies
- custom

### Sample Manifest URLs
- http://bdh-rd.bne.es/viewer.vm?id=0000007619&amp;page=1
- http://bdh-rd.bne.es/pdf.raw?query=id:0000007619&amp;page=1&amp;jpeg=true
- http://bdh-rd.bne.es/viewer.vm?id=0000060229&amp;page=1
- http://bdh-rd.bne.es/pdf.raw?query=id:0000060229&amp;page=1&amp;jpeg=true
- http://bdh-rd.bne.es/viewer.vm?id=0000015300&amp;page=1

### Sample Image Patterns


## Next Steps

1. **Implement URL Pattern Recognition:** Create regex patterns for BNE URL detection
2. **Develop Image Endpoint Discovery:** Test various image proxy endpoints
3. **Create Page Count Detection:** Implement method to determine total pages
4. **Build Download Logic:** Create download service for BNE manuscripts
5. **Implement Maximum Resolution Testing:** Ensure highest quality downloads
6. **Add Authentication Handling:** If required for image access

## Validation Protocol

When implementing BNE support, ensure:
- [ ] URL pattern recognition works correctly
- [ ] Manuscript ID extraction is accurate
- [ ] Page count detection functions properly
- [ ] Maximum resolution is identified and used
- [ ] All downloaded images are valid manuscript pages
- [ ] PDF generation works correctly
- [ ] Authentication handling (if required) functions properly

---

*Generated by Claude Code BNE Analysis Agent*
